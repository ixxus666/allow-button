local friendsenaabled = false
local players = game:GetService("Players")
local userinputservice = game:GetService("UserInputService")
local tweenservice = game:GetService("TweenService")
local player = players.localplayer
local rep = game:GetService("ReplicatedStorage"):waitForChild("Packages"):Waitforchild("Net"):waitforchild("RE/Plotservice/togglefriends"):fireserver()

local screengui = Instance.new("ScreenGui")
screengui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

local button = Instance.new("TextButton")
button.Name = "Toggle"
button.Parent = screengui
button.Size = UDim2.new(0, 132,0, 45)
button.Position = UDim2.new(0.806, 0,0.044, 0)
button.Text = "Allow/Disallow"
button.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.Font = Enum.Font.FredokaOne
button.TextSize = 24


script.Parent.Parent.Parent.button.MouseButton1Click:Connect(function()
	game:GetService("ReplicatedStorage"):waitForChild("Packages"):Waitforchild("Net"):waitforchild("RE/Plotservice/togglefriends"):fireserver()
end)

local drag = false
local dragstart = nil
local startpos = nil

local function updateinput(input)
	if drag then
		local delta = input.Position - dragstart
		button.Position = UDim2.new(startpos.X.Scale, startpos.X.Offset + delta.X, startpos.Y.Scale, startpos.Y.Offset + delta.Y)
	end
end

button.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		drag = true
		dragstart = input.Position
		startpos = button.Position
		
		button.backgroundcolor3 = Color3.fromRGB(30, 30, 30)
	end
end)

userinputservice.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		drag = false
		button.backgroundcolor3 = Color3.fromRGB(20, 20, 20)
	end
end)

userinputservice.InputChanged:Connect(function(input)
	if drag and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
		updateinput(input)
	end
end)
